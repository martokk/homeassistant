# homeassistant:
#   customize:
    # input_boolean.template:
    #   emulated_hue: true
    #   emulated_hue_name: "Template Name"
# switch:
# lights:
# binary_sensor:

google:
  client_id: !secret google_client_id
  client_secret: !secret google_client_secret


sensor:
  - platform: template
    sensors:
      upcoming_packers_event:
        friendly_name: 'Packers Game'
        value_template: >-
            {%- if states.calendar.green_bay_packers %}
                {{ states.calendar.green_bay_packers.attributes.message }}
            {% else %}

            {%- endif %}

      upcoming_packers_start_time:
        value_template: >-
            {%- if states.calendar.green_bay_packer %}
                {{ states.calendar.green_bay_packers.attributes.start_time }}
            {% else %}

            {%- endif %}

      upcoming_bears_event:
        friendly_name: 'Bears Game'
        value_template: >-
            {%- if states.calendar.chicago_bears %}
                {{ states.calendar.chicago_bears.attributes.message }}
            {% else %}

            {%- endif %}

      upcoming_bears_start_time:
        value_template: >-
            {%- if states.calendar.chicago_bears %}
                {{ states.calendar.chicago_bears.attributes.start_time }}
            {% else %}

            {%- endif %}

      upcoming_twit_event:
        friendly_name: 'Twit.tv '
        value_template: >-
            {%- if states.calendar.twit_live_schedule %}
                {{ states.calendar.twit_live_schedule.attributes.message }}
            {% else %}

            {%- endif %}

      upcoming_twit_start_time:
        value_template: >-
            {%- if states.calendar.twit_live_schedule %}
                {{ states.calendar.twit_live_schedule.attributes.start_time }}
            {% else %}

            {%- endif %}



automation:
##########################################
########## NOTIFICATIONS #################
##########################################


  - alias: nfl_sunday_reminder
    trigger:
      # 12pm Games
      - platform: time
        at: '11:50:00'
      # 3pm Games
      - platform: time
        at: '14:50:00'
    condition:
      # NFL Season - The National Football League (NFL) regular season begins the weekend after Labor Day in early September and ends in December or early January.
      - condition: template
        value_template: >
              {% set nfl_season = [ 9, 10, 11, 12, 1 ] %}
              {% if now().month in nfl_season%}
                true
              {% endif %}
      # Sunday
      - condition: time
        weekday:
          - sun
    action:
      - service: script.notify2
        data_template:
          telegram_message: |
            Re: *NFL Streams*
            https://www.reddit.com/r/nflstreams/

##########################################
########## AUTOMATIONS ###################
##########################################


##########################################
########## SCRIPTS #######################
##########################################
# script:





##########################################
########## STORED VARIABLES ##############
##########################################




##########################################
########## OPTIONS #######################
##########################################


##########################################
############### GROUPS ###################
##########################################
group:
  google_calandars:
    name: "Google Calendars"
    entities:
      - calendar.default
      - calendar.twit_live_schedule
      - calendar.green_bay_packers
      - calendar.chicago_bears
      - calendar.subspace_radio
      - calendar.rev_20
      - calendar.stardates

  upcoming_events:
    name: "Upcoming Events"
    entities:
      - sensor.upcoming_packers_event
      - sensor.upcoming_packers_start_time
      - sensor.upcoming_bears_event
      - sensor.upcoming_bears_start_time
      - sensor.upcoming_twit_event
      - sensor.upcoming_twit_start_time

  automation_calandar:
    entities:
      - automation.nfl_sunday_reminder


  # backend_calandar:
  #   entities:


  # options_calandar:
  #   entities:


  # script_calandar:
  #   entities:
