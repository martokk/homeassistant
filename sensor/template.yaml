  - platform: template
    sensors:
      ##########################################
      ########## DEVICES #######################
      ##########################################
      iphone6s_battery:
        friendly_name: "iPhone6s"
        unit_of_measurement: '%'
        value_template: >-
            {%- if states.device_tracker.iphone6s.attributes.battery %}
                {{ states.device_tracker.iphone6s.attributes.battery }}
            {% else %}
                {{ states.sensor.battery_iphone6s.state }}
            {%- endif %}

      ipad_battery:
        friendly_name: "iPad"
        unit_of_measurement: '%'
        value_template: >-
            {%- if states.device_tracker.ipad.attributes.battery %}
                {{ states.device_tracker.ipad.attributes.battery }}
            {% else %}
                {{ states.sensor.battery_ipad.state }}
            {%- endif %}

      watch_battery:
        friendly_name: "Apple Watch"
        unit_of_measurement: '%'
        value_template: >-
            {%- if states.device_tracker.watch.attributes.battery %}
                {{ states.device_tracker.watch.attributes.battery }}
            {% else %}
                {{ states.sensor.battery_watch.state }}
            {%- endif %}

      ##########################################
      ########## UPCOMING EVENTS ###############
      ##########################################
      upcoming_packers_event:
        friendly_name: 'Packers Game'
        value_template: >-
            {%- if states.calendar.green_bay_packers.attributes.message %}
                {{ states.calendar.green_bay_packers.attributes.message }}
            {% else %}
                0
            {%- endif %}

      upcoming_packers_start_time:
        friendly_name: ' '
        value_template: >-
            {%- if states.calendar.green_bay_packers.attributes.start_time %}
                {{ states.calendar.green_bay_packers.attributes.start_time }}
            {% else %}
                0
            {%- endif %}

      upcoming_bears_event:
        friendly_name: 'Bears Game'
        value_template: >-
            {%- if states.calendar.chicago_bears.attributes.message %}
                {{ states.calendar.chicago_bears.attributes.message }}
            {% else %}
                0
            {%- endif %}

      upcoming_bears_start_time:
        friendly_name: ' '
        value_template: >-
            {%- if states.calendar.chicago_bears.attributes.start_time %}
                {{ states.calendar.chicago_bears.attributes.start_time }}
            {% else %}
                0
            {%- endif %}

      upcoming_twit_event:
        friendly_name: 'Twit.tv '
        value_template: >-
            {%- if states.calendar.twit_live_schedule.attributes.message %}
                {{ states.calendar.twit_live_schedule.attributes.message }}
            {% else %}
                0
            {%- endif %}

      upcoming_twit_start_time:
        friendly_name: ' '
        value_template: >-
            {%- if states.calendar.twit_live_schedule.attributes.start_time %}
                {{ states.calendar.twit_live_schedule.attributes.start_time }}
            {% else %}
                0
            {%- endif %}


      ##########################################
      ########## BITCOIN #######################
      ##########################################
      bitcoin_percent_change_24h:
        friendly_name: 'Percent Change 24h'
        value_template: >-
            {%- if states.sensor.bitcoin.attributes.percent_change_24h %}
                {{ states.sensor.bitcoin.attributes.percent_change_24h }}
            {% else %}
                0
            {%- endif %}
        unit_of_measurement: '%'

      bitcoin_percent_change_7d:
        friendly_name: 'Percent Change 7d'
        value_template: >-
            {%- if states.sensor.bitcoin.attributes.percent_change_7d %}
                {{ states.sensor.bitcoin.attributes.percent_change_7d }}
            {% else %}
                0
            {%- endif %}
        unit_of_measurement: '%'


      weather_alert:
        friendly_name: 'Weather Alerts'
        value_template: >-
          {% set criteria = ["Tornado Warning", "Tornado Watch", "Severe Thunderstorm Warning", "Flood Warning", "Severe Weather Statement", "Severe Thunderstorm Watch", "HUR", "TOR", "TOW", "WRN", "SEW", "WIN", "Winter Weather Advisory", "FLO", "WAT", "SVR"] %}
          {% for state in states.sensor.pws_alerts.attributes -%}
            {% if "Description" in state | string %}
              {% set description = states.sensor.pws_alerts.attributes[state] | string %}
              {% for item in criteria %}
                {% if item in description %}
                  {{ description }}
                {% else %}
                {% endif -%}
              {%endfor%}
            {%endif%}
          {%- endfor -%}

      ##########################################
      ########## MEDIA PLAYER ##################
      ##########################################

      chromecast_playing_app:
        friendly_name: "Chromecast Playing App"
        value_template: '{% if states("media_player.vtv_chromecast") %}{{ states.media_player.vtv_chromecast.attributes.app_name }}{% else %}=== OFFLINE ==={% endif %}'

      ##########################################
      ########## SERVER ########################
      ##########################################

      pihole_queries_blocked_today:
        friendly_name: "DNS Queries Blocked Today"
        value_template: >-
            {%- if states.sensor.pihole.state %}
                {{ states.sensor.pihole.state }}
            {% else %}
                0
            {%- endif %}

      pihole_queries_today:
        friendly_name: "DNS Queries Today"
        value_template: >-
            {%- if states.sensor.pihole.attributes.queries_today  %}
                {{ states.sensor.pihole.attributes.queries_today }}
            {% else %}
                0
            {%- endif %}

      pihole_percentage_today:
        friendly_name: "Today's Percentaged Blocked"
        unit_of_measurement: '%'
        value_template: >-
            {%- if states.sensor.pihole.attributes.percentage_today %}
                {{ states.sensor.pihole.attributes.percentage_today }}
            {% else %}
                0
            {%- endif %}

      pihole_domains_blocked:
        friendly_name: "Domains Being Blocked"
        value_template: >-
            {%- if states.sensor.pihole.attributes.domains_blocked %}
                {{ states.sensor.pihole.attributes.domains_blocked }}
            {% else %}
                0
            {%- endif %}

      server_plex:
        friendly_name: "Plex Media Server"
        value_template: '{% if is_state("binary_sensor.plex_media_server", "on") %}online{% else %}=== OFFLINE ==={% endif %}'

      server_sabnzbd:
        friendly_name: "SABnzbd"
        value_template: '{% if is_state("binary_sensor.sabnzbd", "on") %}online{% else %}=== OFFLINE ==={% endif %}'

      server_qbittorrent:
        friendly_name: "qBittorrent"
        value_template: '{% if is_state("binary_sensor.qbittorrent", "on") %}online{% else %}=== OFFLINE ==={% endif %}'

      server_sonarr:
        friendly_name: "Sonarr"
        value_template: '{% if is_state("binary_sensor.sonarr", "on") %}online{% else %}=== OFFLINE ==={% endif %}'

      server_couchpotato:
        friendly_name: "CouchPotato"
        value_template: '{% if is_state("binary_sensor.couchpotato", "on") %}online{% else %}=== OFFLINE ==={% endif %}'

      server_pihole:
        friendly_name: "Pi-Hole"
        value_template: '{% if is_state("device_tracker.pihole", "home") %}online{% else %}=== OFFLINE ==={% endif %}'

      server_modem:
        friendly_name: "ARRIS Modem"
        value_template: '{% if is_state("binary_sensor.arris_modem", "on") %}online{% else %}=== OFFLINE ==={% endif %}'

      server_router:
        friendly_name: "Linksys DD-WRT Router"
        value_template: '{% if is_state("binary_sensor.linksys_ddwrt_router", "on") %}online{% else %}=== OFFLINE ==={% endif %}'

      server_mqtt:
        friendly_name: "MQTT Server"
        value_template: '{% if is_state("binary_sensor.mqtt_server", "on") %}online{% else %}=== OFFLINE ==={% endif %}'

      ##################################
      ######### CLOUD TEMPLATES ########
      ##################################

      cloud_ifttt:
        friendly_name: "IFTTT Cloud"
        value_template: '{% if "Operational" in states("sensor.ifttt_status") %}online{% else %}{{states.sensor.ifttt_status.state}}{% endif %}'

      cloud_lifx:
        friendly_name: "Lifx Cloud"
        value_template: '{% if "Operational" in states("sensor.lifx_status") %}online{% else %}{{states.sensor.lifx_status.state}}{% endif %}'

      ##################################
      ########### IOT TEMPLATES ########
      ##################################

      iot_echo_dot:
        friendly_name: "Echo Dot"
        value_template: '{% if is_state("device_tracker.echo_dot", "home") %}online{% else %}=== OFFLINE ==={% endif %}'

      iot_chromecast:
        friendly_name: "Chromecast"
        value_template: '{% if is_state("device_tracker.chromecast", "home") %}online{% else %}=== OFFLINE ==={% endif %}'

      iot_esp8266_kitchen:
        friendly_name: "ESP8266 - Kitchen"
        value_template: '{% if is_state("device_tracker.esp8266_kitchen", "home") %}online{% else %}=== OFFLINE ==={% endif %}'

      iot_esp8266_office:
        friendly_name: "ESP8266 - Office"
        value_template: '{% is_state("device_tracker.esp8266_office", "home") %}online{% else %}=== OFFLINE ==={% endif %}'

      ###############################
      #### VHOME STATUS ALERTS ######
      ###############################

      server_status_alert:
        friendly_name: 'Server Status'
        value_template: >-
          {% for server in states.group.server_status.attributes.entity_id -%}
            {%if is_state(server, "online") %}
            {%else%}
              {{ server }} - {{ states(server) }};
            {%endif%}
          {%- endfor -%}

      cloud_status_alert:
        friendly_name: 'Cloud Status'
        value_template: >-
          {% for cloud in states.group.cloud_status.attributes.entity_id -%}
            {%if is_state(cloud, "online") %}
            {%else%}
              {{ cloud }} - {{ states(cloud) }};
            {%endif%}
          {%- endfor -%}

      iot_status_alert:
        friendly_name: 'IoT Status'
        value_template: >-
          {% for iot in states.group.iot_status.attributes.entity_id -%}
            {%if is_state(iot, "online") %}
            {%else%}
              {{ iot }} - {{ states(iot) }};
            {%endif%}
          {%- endfor -%}
