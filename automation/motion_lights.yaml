##########################################
########## KITCHEN MOTION ################
##########################################
  - alias: Turn ON kitch lights (movement)
    trigger:
    - platform: state
      entity_id: binary_sensor.kitchen_motion_sensor
      from: 'off'
      to: 'on'
    action:
    - service: homeassistant.turn_on
      entity_id: script.kitchen_lights_timer_on
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.var_kitchen_on

  - alias: Turn OFF kitch lights (no movement 7sec)
    trigger:
    - platform: state
      entity_id: binary_sensor.kitchen_motion_sensor
      from: 'on'
      to: 'off'
    action:
    - service: homeassistant.turn_on
      entity_id: script.kitchen_lights_timer_off

  - alias: Turn ON kitch lights (sink movement)
    trigger:
      - platform: mqtt
        topic: device/kitchen/pir3
        payload: "1"
    action:
    - service: script.kitchen_lights_timer_day

##########################################
########## BEDROOM MOTION ################
##########################################
  - alias: bedroom_motion_turn_on_lights
    trigger:
    - platform: state
      entity_id: binary_sensor.bedroom_motion_sensor
      from: 'off'
      to: 'on'
    action:
    - service: light.turn_on
      entity_id: light.sonoff_silver_lamp
    - service: input_select.select_option
      data:
        entity_id: input_select.bedroom_led_effect
        option: 'Static'
    - service: light.turn_on
      data:
        entity_id: light.bedroom_led_strip
        brightness: 75
        rgb_color: [255, 175, 125]


  - alias: bedroom_motion_turn_off_lights
    trigger:
    - platform: state
      entity_id: binary_sensor.bedroom_motion_sensor
      from: 'on'
      to: 'off'
      for:
        minutes: 5
    action:
    - service: light.turn_off
      entity_id: light.sonoff_silver_lamp
    - condition: state
      entity_id: input_select.var_last_known_scene
      state: 'Off'
    - service: light.turn_off
      entity_id: light.bedroom_center_led_strip

##########################################
########## ENTERTAINMENT CENTER MOTION ###
##########################################
  - alias: entertainment_center_motion_turn_on_lights
    trigger:
    - platform: state
      entity_id: binary_sensor.entertainment_center_motion_sensor
      from: 'off'
      to: 'on'
    condition:
      condition: or
      conditions:
        - condition: template
          value_template: '{% if states.input_select.var_last_known_scene.state == "Day" %} true {%endif%}'
        - condition: template
          value_template: '{% if states.input_select.var_last_known_scene.state == "Day Le" %} true {%endif%}'
        - condition: template
          value_template: '{% if states.input_select.var_last_known_scene.state == "Off" %} true {%endif%}'
    action:
    - service: input_select.select_option
      data:
        entity_id: input_select.entertainment_center_led_effect
        option: 'Static'
    - service: light.turn_on
      data:
        entity_id: light.entertainment_center_led_strip
        brightness: 75
        rgb_color: [255, 175, 125]
    - service: input_select.select_option
      data:
        entity_id: input_select.tables_led_effect
        option: 'Static'
    - service: light.turn_on
      data:
        entity_id: light.tables_led_strip
        brightness: 75
        rgb_color: [255, 175, 125]


  - alias: entertainment_center_motion_turn_off_lights
    trigger:
    - platform: state
      entity_id: binary_sensor.entertainment_center_motion_sensor
      from: 'on'
      to: 'off'
      for:
        minutes: 5
    condition:
      condition: or
      conditions:
        - condition: template
          value_template: '{% if states.input_select.var_last_known_scene.state == "Day" %} true {%endif%}'
        - condition: template
          value_template: '{% if states.input_select.var_last_known_scene.state == "Day Le" %} true {%endif%}'
        - condition: template
          value_template: '{% if states.input_select.var_last_known_scene.state == "Off" %} true {%endif%}'
    action:
    - service: light.turn_off
      entity_id: light.entertainment_center_led_strip
    - service: light.turn_off
      entity_id: light.tables_led_strip

##########################################
########## SET VARIABLES #################
##########################################
  - alias: setMin_var_kitchen_delay
    trigger:
    - platform: state
      entity_id: input_boolean.var_kitchen_on
      from: "off"
      to: "on"
      for:
        seconds: 4
    action:
    - service: input_slider.select_value
      data_template:
        entity_id: input_slider.var_kitchen_delay
        value: 6

  - alias: setMid_var_kitchen_delay
    trigger:
    - platform: state
      entity_id: input_boolean.var_kitchen_on
      state: "on"
      for:
        seconds: 30
    action:
    - service: input_slider.select_value
      data_template:
        entity_id: input_slider.var_kitchen_delay
        value: 15

  - alias: setMax_var_kitchen_delay
    trigger:
    - platform: state
      entity_id: input_boolean.var_kitchen_on
      state: "on"
      for:
        seconds: 90
    action:
    - service: input_slider.select_value
      data_template:
        entity_id: input_slider.var_kitchen_delay
        value: 60
